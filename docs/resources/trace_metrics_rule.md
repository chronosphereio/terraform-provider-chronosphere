---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "chronosphere_trace_metrics_rule Resource - chronosphere"
subcategory: ""
description: |-
  
---

# chronosphere_trace_metrics_rule (Resource)



## Example Usage

```terraform
resource "chronosphere_trace_metrics_rule" "tmr" {
  name = "tmr-name"
  slug = "tmr-slug"

  histogram_buckets_seconds = [
    1,
    2,
    3,
  ]
  metric_name = "tmr_metric_name"

  metric_labels = {
    "tmr_label_1" = "tmr_value_1"
    "tmr_label_2" = "tmr_value_2"
  }
  trace_filter {
    trace {
      duration {
        min_secs = 10
      }
      error {
        value = false
      }
    }
    span {
      match_type = "include"
      service {
        match = "exact"
        value = "svc1"
      }
      operation {
        value = "op1"
      }
      parent_service {
        value = "svc0"
      }
      parent_operation {
        value = "op0"
      }
      duration {
        min_secs = 11
      }
      error {
        value = true
      }
      tag {
        key = "tag1k"
        value {
          value = "tag1v"
        }
      }
      tag {
        key = "tag2k"
        value {
          value = "tag2v"
        }
      }
      tag {
        key = "tag3k"

        numeric_value {
          comparison = "GREATER_THAN"
          value      = 5.3
        }
      }
      span_count {
        min = 2
      }
    }
    span {
      match_type = "exclude"
      service {
        value = "svc2"
      }
      operation {
        value = "op2"
      }
      parent_service {
        value = "svc1"
      }
      parent_operation {
        value = "op1"
      }
      duration {
        max_secs = 2
      }
      tag {
        key = "tag3k"
        value {
          value = "tag3v"
        }
      }
      tag {
        key = "tag4k"
        value {
          value = "tag4v"
        }
      }
      span_count {
        max = 5
      }
    }
  }
}

resource "chronosphere_trace_metrics_rule" "tmr_with_group_by" {
  name = "tmr-with-group-by-name"
  slug = "tmr-with-group-by-slug"

  histogram_buckets_seconds = [
    0.1,
    0.5,
    1.0,
    2.0,
    10.0,
  ]
  metric_name = "tmr_with_group_by_metric_name"

  metric_labels = {
    "tmr_wgb_label_1" = "tmr_wbg_value_1"
    "tmr_wbg_label_2" = "tmr_wbg_value_2"
  }
  group_by {
    label = "tmr_wgb_group_by_label_1"
    key {
      type      = "TAG"
      named_key = "foo"
    }
  }
  group_by {
    label = "tmr_wgb_group_by_label_2"
    key {
      type      = "OPERATION"
      named_key = "bar"
    }
  }

  trace_filter {
    trace {
      duration {
        min_secs = 10
      }
      error {
        value = false
      }
    }
    span {
      match_type = "include"
      service {
        match = "exact"
        value = "svc1"
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metric_name` (String)
- `name` (String)
- `trace_filter` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--trace_filter))

### Optional

- `group_by` (Block List) (see [below for nested schema](#nestedblock--group_by))
- `histogram_buckets_seconds` (List of Number)
- `metric_labels` (Map of String)
- `slug` (String)

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--trace_filter"></a>
### Nested Schema for `trace_filter`

Optional:

- `span` (Block List) (see [below for nested schema](#nestedblock--trace_filter--span))
- `trace` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--trace))

<a id="nestedblock--trace_filter--span"></a>
### Nested Schema for `trace_filter.span`

Optional:

- `duration` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--duration))
- `error` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--error))
- `match_type` (String)
- `operation` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--operation))
- `parent_operation` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--parent_operation))
- `parent_service` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--parent_service))
- `service` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--service))
- `span_count` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--span_count))
- `tag` (Block List) (see [below for nested schema](#nestedblock--trace_filter--span--tag))
- `tags` (Block List, Deprecated) (see [below for nested schema](#nestedblock--trace_filter--span--tags))

<a id="nestedblock--trace_filter--span--duration"></a>
### Nested Schema for `trace_filter.span.duration`

Optional:

- `max_seconds` (Number, Deprecated)
- `max_secs` (Number)
- `min_seconds` (Number, Deprecated)
- `min_secs` (Number)


<a id="nestedblock--trace_filter--span--error"></a>
### Nested Schema for `trace_filter.span.error`

Required:

- `value` (Boolean)


<a id="nestedblock--trace_filter--span--operation"></a>
### Nested Schema for `trace_filter.span.operation`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)


<a id="nestedblock--trace_filter--span--parent_operation"></a>
### Nested Schema for `trace_filter.span.parent_operation`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)


<a id="nestedblock--trace_filter--span--parent_service"></a>
### Nested Schema for `trace_filter.span.parent_service`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)


<a id="nestedblock--trace_filter--span--service"></a>
### Nested Schema for `trace_filter.span.service`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)


<a id="nestedblock--trace_filter--span--span_count"></a>
### Nested Schema for `trace_filter.span.span_count`

Optional:

- `max` (Number)
- `min` (Number)


<a id="nestedblock--trace_filter--span--tag"></a>
### Nested Schema for `trace_filter.span.tag`

Optional:

- `key` (String)
- `numeric_value` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--tag--numeric_value))
- `value` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--tag--value))

<a id="nestedblock--trace_filter--span--tag--numeric_value"></a>
### Nested Schema for `trace_filter.span.tag.numeric_value`

Required:

- `comparison` (String)
- `value` (Number)


<a id="nestedblock--trace_filter--span--tag--value"></a>
### Nested Schema for `trace_filter.span.tag.value`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)



<a id="nestedblock--trace_filter--span--tags"></a>
### Nested Schema for `trace_filter.span.tags`

Optional:

- `key` (String)
- `numeric_value` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--tags--numeric_value))
- `value` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--span--tags--value))

<a id="nestedblock--trace_filter--span--tags--numeric_value"></a>
### Nested Schema for `trace_filter.span.tags.numeric_value`

Required:

- `comparison` (String)
- `value` (Number)


<a id="nestedblock--trace_filter--span--tags--value"></a>
### Nested Schema for `trace_filter.span.tags.value`

Optional:

- `in_values` (List of String)
- `match` (String)
- `value` (String)




<a id="nestedblock--trace_filter--trace"></a>
### Nested Schema for `trace_filter.trace`

Optional:

- `duration` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--trace--duration))
- `error` (Block List, Max: 1) (see [below for nested schema](#nestedblock--trace_filter--trace--error))

<a id="nestedblock--trace_filter--trace--duration"></a>
### Nested Schema for `trace_filter.trace.duration`

Optional:

- `max_seconds` (Number, Deprecated)
- `max_secs` (Number)
- `min_seconds` (Number, Deprecated)
- `min_secs` (Number)


<a id="nestedblock--trace_filter--trace--error"></a>
### Nested Schema for `trace_filter.trace.error`

Required:

- `value` (Boolean)




<a id="nestedblock--group_by"></a>
### Nested Schema for `group_by`

Required:

- `key` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--group_by--key))
- `label` (String)

<a id="nestedblock--group_by--key"></a>
### Nested Schema for `group_by.key`

Required:

- `type` (String)

Optional:

- `named_key` (String)
